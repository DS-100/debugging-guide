<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Project A2 Common Questions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-ff63373b1067ca6f91cf1456aa1f00a2.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="quarto-light">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="3">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#questions-5d-and-5f" id="toc-questions-5d-and-5f" class="nav-link active" data-scroll-target="#questions-5d-and-5f">Questions 5d and 5f</a>
  <ul>
  <li><a href="#general-debugging-tips" id="toc-general-debugging-tips" class="nav-link" data-scroll-target="#general-debugging-tips">General Debugging Tips</a></li>
  <li><a href="#my-training-rmse-is-low-but-my-validationtest-rmse-is-high" id="toc-my-training-rmse-is-low-but-my-validationtest-rmse-is-high" class="nav-link" data-scroll-target="#my-training-rmse-is-low-but-my-validationtest-rmse-is-high">My training RMSE is low, but my validation/test RMSE is high</a></li>
  <li><a href="#valueerror-per-column-arrays-must-each-be-1-dimensional" id="toc-valueerror-per-column-arrays-must-each-be-1-dimensional" class="nav-link" data-scroll-target="#valueerror-per-column-arrays-must-each-be-1-dimensional"><code>ValueError: Per-column arrays must each be 1-dimensional</code></a></li>
  <li><a href="#keyerror-sale-pricekeyerror-log-sale-price" id="toc-keyerror-sale-pricekeyerror-log-sale-price" class="nav-link" data-scroll-target="#keyerror-sale-pricekeyerror-log-sale-price"><code>KeyError: 'Sale Price'</code>/<code>KeyError: 'Log Sale Price'</code></a></li>
  <li><a href="#value-error-could-not-convert-string-to-float" id="toc-value-error-could-not-convert-string-to-float" class="nav-link" data-scroll-target="#value-error-could-not-convert-string-to-float"><code>Value Error: could not convert string to float</code></a></li>
  <li><a href="#valueerror-input-x-contains-infinity-or-a-value-too-large-for-dtypefloat64" id="toc-valueerror-input-x-contains-infinity-or-a-value-too-large-for-dtypefloat64" class="nav-link" data-scroll-target="#valueerror-input-x-contains-infinity-or-a-value-too-large-for-dtypefloat64"><code>ValueError: Input X contains infinity or a value too large for dtype('float64')</code></a></li>
  <li><a href="#valueerror-input-x-contains-nan" id="toc-valueerror-input-x-contains-nan" class="nav-link" data-scroll-target="#valueerror-input-x-contains-nan"><code>ValueError: Input X contains NaN</code></a></li>
  <li><a href="#valueerror-the-feature-names-should-match-those-that-were-passed-during-fit" id="toc-valueerror-the-feature-names-should-match-those-that-were-passed-during-fit" class="nav-link" data-scroll-target="#valueerror-the-feature-names-should-match-those-that-were-passed-during-fit"><code>ValueError: The feature names should match those that were passed during fit</code></a></li>
  <li><a href="#valueerror-operands-could-not-be-broadcast-together-with-shapes-..." id="toc-valueerror-operands-could-not-be-broadcast-together-with-shapes-..." class="nav-link" data-scroll-target="#valueerror-operands-could-not-be-broadcast-together-with-shapes-..."><code>ValueError: operands could not be broadcast together with shapes ...</code></a></li>
  <li><a href="#typeerror-nonetype-is-not-subscriptable" id="toc-typeerror-nonetype-is-not-subscriptable" class="nav-link" data-scroll-target="#typeerror-nonetype-is-not-subscriptable"><code>TypeError: NoneType is not subscriptable</code></a></li>
  </ul></li>
  <li><a href="#question-6" id="toc-question-6" class="nav-link" data-scroll-target="#question-6">Question 6</a>
  <ul>
  <li><a href="#im-getting-negative-values-for-the-prop_overest-plot" id="toc-im-getting-negative-values-for-the-prop_overest-plot" class="nav-link" data-scroll-target="#im-getting-negative-values-for-the-prop_overest-plot">I’m getting negative values for the <code>prop_overest</code> plot</a></li>
  </ul></li>
  <li><a href="#gradescopepensieve" id="toc-gradescopepensieve" class="nav-link" data-scroll-target="#gradescopepensieve">Gradescope/Pensieve</a>
  <ul>
  <li><a href="#i-dont-have-many-gradescopepensieve-submissions-left" id="toc-i-dont-have-many-gradescopepensieve-submissions-left" class="nav-link" data-scroll-target="#i-dont-have-many-gradescopepensieve-submissions-left">I don’t have many Gradescope/Pensieve submissions left</a></li>
  <li><a href="#wrong-number-of-lines-instead-of" id="toc-wrong-number-of-lines-instead-of" class="nav-link" data-scroll-target="#wrong-number-of-lines-instead-of">“Wrong number of lines ( ** instead of ** )”</a></li>
  <li><a href="#my-code-runs-locally-but-it-fails-for-every-question-after-a-certain-point" id="toc-my-code-runs-locally-but-it-fails-for-every-question-after-a-certain-point" class="nav-link" data-scroll-target="#my-code-runs-locally-but-it-fails-for-every-question-after-a-certain-point">My code runs locally, but it fails for every question after a certain point</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Project A2 Common Questions</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="questions-5d-and-5f" class="level2">
<h2 class="anchored" data-anchor-id="questions-5d-and-5f">Questions 5d and 5f</h2>
<section id="general-debugging-tips" class="level3">
<h3 class="anchored" data-anchor-id="general-debugging-tips">General Debugging Tips</h3>
<p>Question 5 is a challenging question that mirrors a lot of data science work in the real world: cleaning, exploring, and transforming data; fitting a model, working with a pre-defined pipeline and evaluating your model’s performance. Here are some general debugging tips to make the process easier:</p>
<ul>
<li>Separate small tasks into helper functions, especially if you will execute them multiple times. For example, a helper function that one-hot encodes a categorical variable may be helpful as you could perform it on multiple such columns. If you’re parsing a column with RegEx, it also might be a good idea to separate it to a helper function. This allows you to verify that you’re not making errors in these small tasks and prevents unknown bugs from appearing.</li>
<li>Feel free to make new cells to play with the data! As long as you delete them afterward, it will not affect the autograder.</li>
<li>The <code>feature_engine_final</code> function looks daunting at first, but start small. First, try and implement a model with a single feature to get familiar with how the pipeline works, then slowly experiment with adding one feature at a time and see how that affects your training RMSE.</li>
</ul>
</section>
<section id="my-training-rmse-is-low-but-my-validationtest-rmse-is-high" class="level3">
<h3 class="anchored" data-anchor-id="my-training-rmse-is-low-but-my-validationtest-rmse-is-high">My training RMSE is low, but my validation/test RMSE is high</h3>
<p>Your model is likely overfitting to the training data and does not generalize to the test set. Recall the bias-variance tradeoff discussed in lecture. As you add more features and make your model more complex, it is expected that your training error will decrease. Your validation and test error may also decrease initially, but if your model is too complex, you end up with high validation and test RMSE.</p>
<center>
<img src="under_overfit.png" width="500" alt="Plot showing a conceptual understanding of underfitting and overfitting. Model complexity is on the x-axis and Error/Variance is on the y axis. As you increase model complexity, Variance increases and training error decreases. Above the curves that represent Variance and Training Error, a third curve labeled Validtion Error exists in a U-shape. The chosen complexity level is represented by a dashed vertical line that intersections with the lowest y-value for the Validation Error curve. To the left of the dashed line is underfitting and to the right of the dashed line is overfitting.)">
</center>
<p>To decrease model complexity, consider visualizing the relationship between the features you’ve chosen with the <code>(Log) Sale Price</code> and removing features that are not highly correlated. Removing outliers can also help your model generalize better and prevent it from fitting to noise in the data. Methods like cross-validation allow you to get a better sense of where you lie along the validation error curve. Feel free to take a look at the <a href="https://ds100.org/fa24/resources/assets/lectures/lec16/lec16.html">code used in Lecture 16</a> if you’re confused on how to implement cross-validation.</p>
</section>
<section id="valueerror-per-column-arrays-must-each-be-1-dimensional" class="level3">
<h3 class="anchored" data-anchor-id="valueerror-per-column-arrays-must-each-be-1-dimensional"><code>ValueError: Per-column arrays must each be 1-dimensional</code></h3>
<p>If you’re passing the tests for question 5d but getting this error in question 5f, then your <code>Y</code> variable is likely a <code>DataFrame</code>, not a <code>Series</code>. <code>sklearn</code> models like <code>LinearRegression</code> expect <code>X</code> to be a 2D datatype (ie. <code>DataFrame</code>, 2D <code>NumPy</code> array) and <code>Y</code> to be a 1D datatype (ie. <code>Series</code>, 1D <code>NumPy</code> array).</p>
</section>
<section id="keyerror-sale-pricekeyerror-log-sale-price" class="level3">
<h3 class="anchored" data-anchor-id="keyerror-sale-pricekeyerror-log-sale-price"><code>KeyError: 'Sale Price'</code>/<code>KeyError: 'Log Sale Price'</code></h3>
<p><code>KeyError</code>s are raised when a column name does not exist in your <code>DataFrame</code>. You could be getting this error because:</p>
<ul>
<li>The test set does not contain a <code>"(Log) Sale Price"</code> as that’s what we’re trying to predict. Make sure you only reference the <code>"(Log) Sale Price"</code> column when working with training data (<code>is_test_set=False</code>).</li>
<li>You dropped the <code>"Sale Price"</code> column twice in your preprocessing code.</li>
</ul>
</section>
<section id="value-error-could-not-convert-string-to-float" class="level3">
<h3 class="anchored" data-anchor-id="value-error-could-not-convert-string-to-float"><code>Value Error: could not convert string to float</code></h3>
<p>This error occurs if your final design matric contains non-numeric columns. For example, if you simply run <code>X = data.drop(columns = ["Log Sale Price", "Sale Price"])</code>, all the non-numeric columns of <code>data</code> are still included in <code>X</code> and you will see this error message. The <code>fit</code> function of a <code>lm.LinearRegression</code> object can take a <code>pandas</code> <code>DataFrame</code> as the <code>X</code> argument, but requires that the <code>DataFrame</code> is only composed of numeric values.</p>
</section>
<section id="valueerror-input-x-contains-infinity-or-a-value-too-large-for-dtypefloat64" class="level3">
<h3 class="anchored" data-anchor-id="valueerror-input-x-contains-infinity-or-a-value-too-large-for-dtypefloat64"><code>ValueError: Input X contains infinity or a value too large for dtype('float64')</code></h3>
<p>The reason why your <code>X</code> data contains infinity is likely because you are taking the logarithm of 0 somewhere in your code. To prevent this, try:</p>
<ul>
<li>Adding a small number to the features that you want to perform the log transformation on so that all values are positive and greater than 0. <strong>Note that whatever value you add to your train data should also be added to your test data.</strong></li>
<li>Removing zeroes before taking the logarithm. Note that this is only possible on the training data as you cannot drop rows from the test set.</li>
</ul>
</section>
<section id="valueerror-input-x-contains-nan" class="level3">
<h3 class="anchored" data-anchor-id="valueerror-input-x-contains-nan"><code>ValueError: Input X contains NaN</code></h3>
<p>The reason why your design matrix <code>X</code> contains <code>NaN</code> values is likely because you take the log of a negative number somewhere in your code. To prevent this, try:</p>
<ul>
<li>Shifting the range of values for features that you want to perform the logging operation on to positive values greater than 0. <strong>Note that whatever value you add to your train data should also be added to your test data.</strong></li>
<li>Removing negative values before taking the log. Note that this is only possible on the training data as you cannot drop rows from the test set.</li>
</ul>
</section>
<section id="valueerror-the-feature-names-should-match-those-that-were-passed-during-fit" class="level3">
<h3 class="anchored" data-anchor-id="valueerror-the-feature-names-should-match-those-that-were-passed-during-fit"><code>ValueError: The feature names should match those that were passed during fit</code></h3>
<p>This error is followed by one or both of the following:</p>
<pre><code>Feature names unseen at fit time:
- FEATURE NAME 1
- FEATURE NAME 2
  ...

Feature names seen at fit time, yet now missing
- FEATURE NAME 1
- FEATURE NAME 2
  ...</code></pre>
<p>This error occurs if the columns/features you’re passing in for the test dataset aren’t the same as the features you used to train the model. <code>sklearn</code>’s models expect the testing data’s column names to match the training data’s. The features listed under <code>Feature names unseen at fit time</code> are columns that were present in the <em>training</em> data but not the <em>testing</em> data, and features listed under <code>Feature names seen at fit time, yet now missing</code> were present in the <em>testing</em> data but not the <em>training</em> data.</p>
<p>Potential causes for this error:</p>
<ul>
<li><p>Your preprocessing for <code>X</code> is different for training and testing. Double-check your code in <code>feature_engine_final</code>! Besides removing any references to <code>'Sale Price'</code> and code that would remove rows from the test set, your preprocessing should be the same.</p></li>
<li><p>Some one-hot-encoded categories are present in training but not in testing (or vice versa). For example, let’s say that the feature <code>"Data100"</code> has categories “A”, “B”, “C”, and “D”. If “A”, “B”, and “C” are present in the training data, but “B”, “C”, and “D” are present in the testing data, you will get this error:</p>
<pre><code>The feature names should match those that were passed during fit. Feature names unseen at fit time:
- Data100_D
  ...

Feature names seen at fit time, yet now missing
- Data100_A</code></pre></li>
</ul>
</section>
<section id="valueerror-operands-could-not-be-broadcast-together-with-shapes-..." class="level3">
<h3 class="anchored" data-anchor-id="valueerror-operands-could-not-be-broadcast-together-with-shapes-..."><code>ValueError: operands could not be broadcast together with shapes ...</code></h3>
<p>This error occurs when you attempt to perform an operation on two NumPy arrays with mismatched dimensions. For example, <code>np.ones(100000) - np.ones(1000000)</code> is not defined since you cannot perform elementwise addition on arrays with different lengths. Use the error traceback to identify which line is erroring, and print out the shape of the arrays on the line before using <code>.shape</code>.</p>
</section>
<section id="typeerror-nonetype-is-not-subscriptable" class="level3">
<h3 class="anchored" data-anchor-id="typeerror-nonetype-is-not-subscriptable"><code>TypeError: NoneType is not subscriptable</code></h3>
<p>This error occurs when a <code>NoneType</code> variable is being accessed like a class, for example <code>None.some_function()</code>. It may be difficult to identify where the <code>NoneType</code> is coming from, but here are some possible causes:</p>
<ul>
<li>Check that your helper functions always end with a <code>return</code> statement and that the result is expected!</li>
<li><code>pandas</code>’ <code>inplace=</code> argument allows us to simplify code; instead of reassigning <code>df = df.an_operation(inplace=False)</code>, you can choose to shorten the operation as <code>df.an_operation(inplace=True)</code>. Note that any <code>inplace=True</code> argument modifies the <code>DataFrame</code> and <em>returns nothing</em> (read more about it in <a href="https://stackoverflow.com/questions/45570984/in-pandas-is-inplace-true-considered-harmful-or-not">this stack overflow post</a>). Both <code>df = df.an_operation(inplace=True)</code> and <code>df.an_operation(inplace=True).another_operation()</code> will result in this <code>TypeError</code>.</li>
</ul>
<p>Check the return type of all functions you end up using. For example, <code>np.append(arr_1, arr_2)</code> returns a <code>NumPy</code> array. In contrast, <code>Python</code>’s <code>.append</code> function mutates the iterable and returns <code>None</code>. If you are unsure of what data type is being returned, looking up the documentation of the function , adding print statements, using <code>type(some_function(input)</code> are all useful ways to debug your code.</p>
</section>
</section>
<section id="question-6" class="level2">
<h2 class="anchored" data-anchor-id="question-6">Question 6</h2>
<section id="im-getting-negative-values-for-the-prop_overest-plot" class="level3">
<h3 class="anchored" data-anchor-id="im-getting-negative-values-for-the-prop_overest-plot">I’m getting negative values for the <code>prop_overest</code> plot</h3>
<p>Note that in the function body, the skeleton code includes:</p>
<pre><code># DO NOT MODIFY THESE TWO LINES
    if subset_df.shape[0] == 0:
        return -1</code></pre>
<p>The above two lines of code are included to avoid dividing by 0 when computing <code>prop_overest</code> in the case that <code>subset_df</code> does not have any rows. When interpreting the plots, you can disregard the negative portions as you know they are invalid values corresponding to this edge case. You can verify this by observing that your <code>RMSE</code> plot does not display the corresponding intervals.</p>
</section>
</section>
<section id="gradescopepensieve" class="level2">
<h2 class="anchored" data-anchor-id="gradescopepensieve">Gradescope/Pensieve</h2>
<section id="i-dont-have-many-gradescopepensieve-submissions-left" class="level3">
<h3 class="anchored" data-anchor-id="i-dont-have-many-gradescopepensieve-submissions-left">I don’t have many Gradescope/Pensieve submissions left</h3>
<p>If you’re almost out of Gradescope submissions, try using k-fold cross-validation to check the accuracy of your model. Results from cross-validation will be closer to the test set accuracy than results from the training data. Feel free to take a look at the <a href="https://ds100.org/fa24/resources/assets/lectures/lec16/lec16.html">code used in Lecture 16</a> if you’re confused on how to implement cross-validation.</p>
</section>
<section id="wrong-number-of-lines-instead-of" class="level3">
<h3 class="anchored" data-anchor-id="wrong-number-of-lines-instead-of">“Wrong number of lines ( ** instead of ** )”</h3>
<p>This occurs when you remove outliers when preprocessing the testing data. <em>Please do not remove any outliers from your test set.</em> You may only remove outliers in training data.</p>
</section>
<section id="my-code-runs-locally-but-it-fails-for-every-question-after-a-certain-point" class="level3">
<h3 class="anchored" data-anchor-id="my-code-runs-locally-but-it-fails-for-every-question-after-a-certain-point">My code runs locally, but it fails for every question after a certain point</h3>
<p>See <a href="https://ds100.org/debugging-guide/autograder_gradescope/autograder_gradescope.html#why-do-i-see-multiple-nameerror-name-___-is-not-defined-errors-for-all-questions-after-a-certain-point-on-gradescopepensieve">Why do I see multiple NameError: name <code>___</code> is not defined errors for all questions after a certain point on Gradescope/Pensieve?</a></p>
<!-- ### Numerical Overflow

This error can be caused by negative predictions or overly large predictions that create an extremely large RMSE. The cell before you generate your submission runs `submission_df["Value"].describe()`, which returns some summary statistics of your predictions. Your maximum value for `Log Sale Price` should not be over 25, and your minimum value should not be below 0.

For your reference, a log sale price of 25 corresponds to a sale price of $e^{25} \approx$ 70 billion, which is far bigger than anything found in the dataset. A log sale price of -1 corresponds to a sale price of $e^{-1} \approx \$0.37$, which is also not reasonable. If you see such large or small predictions, you can try removing outliers from the _training_ data or experimenting with new features so that your model generalizes better. -->


</section>
</section>

</main> <!-- /main -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
    // 1. Select the specific parent div within the callout header that has the 
    //    collapse attributes (data-bs-toggle).
    var calloutToggles = document.querySelectorAll(
        '.callout-header[data-bs-toggle="collapse"]'
    );

    calloutToggles.forEach(function(toggle) {
        // 2. Force the ARIA role to be 'button'
        // This is crucial because a 'div' is not allowed to use aria-expanded.
        toggle.setAttribute('role', 'button');
        
        // 3. Ensure it is keyboard-focusable (critical accessibility fix)
        if (toggle.getAttribute('tabindex') === null) {
             toggle.setAttribute('tabindex', '0');
        }
    });

    // 1. Target all code blocks (Source Code and Code Output <pre> elements)
    // that are scrollable (have overflow:auto/scroll).
var scrollableRegions = document.querySelectorAll(
        // 1. Source Code <pre>
        'div.sourceCode > pre, ' + 
        
        // 2. Output <pre> inside a generic cell-output
        '.cell-output > pre, ' + 
        
        // 3. The main DIV container for cell-output-display (from previous fix)
        '.cell-output-display.cell-output, ' +
                
        // 4. PRE tag inside any ANSI-escaped output (e.g., .ansi-escaped-output > pre)
        '.ansi-escaped-output > pre, ' +
        
        // 5. The deepest container for error output (e.g., #ID > .cell-output-error... > .ansi-escaped-output > pre)
        '.cell-output-error.cell-output > .ansi-escaped-output > pre, ' +

        'pre[id]' // Target any PRE tag that has an ID attribute
    );

    scrollableRegions.forEach(function(region) {
        // Check if the element actually has horizontal overflow (is scrollable)
        // Add tabindex="0" to make the region keyboard-focusable.
        if (region.getAttribute('tabindex') === null || region.getAttribute('tabindex') === undefined) {
             region.setAttribute('tabindex', '0');
        }
    });
});
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/ds100\.org\/debugging-guide\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://dap.berkeley.edu/get-help/report-web-accessibility-issue">
<p>Accessibility</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://ophd.berkeley.edu/policies-and-procedures/nondiscrimination-policy-statement">
<p>Nondiscrimination</p>
</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>